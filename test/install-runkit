#!/bin/bash
set -e

# Do not run as CGI
if [ -n "$GATEWAY_INTERFACE" ] ; then
    echo 'Can not invoke as CGI!'
    exit 1
fi

# These do not support runkit
case "$TRAVIS_PHP_VERSION" in
    hhvm*|nightly)
        exit 0
        ;;
    7.*)
        wget https://github.com/runkit7/runkit7/releases/download/1.0.5b1/runkit-1.0.5b1.tgz
        pecl install ./runkit-1.0.5b1.tgz
        ;;
    *)
        pecl install runkit
        ;;
esac

phpenv config-add test/php-runkit.ini
